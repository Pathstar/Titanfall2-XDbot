> > 纯图一乐bot，希望能将愉快的气氛带给大家 (≧▽≦)/
>
> ------
>
> ## 功能
>
> ### 一、指令系统
>
> - 命令可随意使用大小写。
>
> - 支持通过队伍内`@xd`，bot也会使用队内消息回复。也可将`@xd`置于话的末尾
>
> - 例如：`今天也要开心嗷！@xd YaY`
>
> #### 指令一览（按字母排序）
>
> | 命令                        | 说明                                                         |
> | --------------------------- | ------------------------------------------------------------ |
> | `@xd AI (问题)`             | 与AI交流（模型API使用Qwen 4B，支持上下文）                   |
> | `@xd help`                  | 返回可用指令摘要                                             |
> | `@xd meow`                  | 喵喵妙妙妙妙妙妙妙妙                                         |
> | `@xd meme`                  | 随机输出一个meme笑话（待补充）                               |
> | `@xd pinyin (拼音)`         | 拼音转文字，保留不可转的内容（py库 Pinyin2Hanzi）            |
> | `@xd roll`                  | 随机返回1~6                                                  |
> | `@xd time`                  | 返回当前实际时间                                             |
> | `@xd wiki`                  | 返回bilibili专栏链接和github README.md网址                   |
> | `@xd yay`                   | 返回随机颜表情 (≧▽≦)/                                        |
> | `@xd 查询等级 (模糊玩家名)` | 查询玩家等级，留空查自己                                     |
> | `@xd 查询装备 (模糊玩家名)` | 查询玩家装备，留空查自己                                     |
> | `@xd 查询武器 (模糊武器名)` | *todo* 查询拿着该武器的玩家，支持多个多个，例如：<br />`@xd 查询武器 隐身  手雷` |
> | `@xd 井字棋`                | 两人输入后开启井字棋，可用 `@xd 3 1` 落子到第三列第一行      |
> | `@xd 打开/关闭连杀播报`     | 控制连杀播报开关                                             |
> | `@xd 进入/退出操控模式`     | 远程操控我自己，格式见操控模式指令                           |
> | `@xd 服务器 模式/名称 (名)` | 模糊查询服务器人数，格式见查询服务器指令                     |
>
> #### AI设置指令
>
> | 指令                           | 功能           |
> | ------------------------------ | -------------- |
> | `@xd ai set 清除上下文`        | 进入新聊天     |
> | `@xd ai set new chat`          | 进入新聊天     |
> | `@xd ai set 上下文长度 (数字)` | 设置上下文长度 |
>
> *为什么不用更好更快的模型*
>
> - 因为没money
>
> #### 操控模式指令
>
> 格式：`[命令 时间] 前/后/左/右/左转/右转/停/跳/蹲/开火/停火/重火力/技能/重生/走/跑/退出；cmd [任意控制台命令]...`
>
> - 为了尽量简洁，进入后不需 `@xd`
>
> | 动作示例 | 作用                             |
> | -------- | -------------------------------- |
> | 前 10    | 前进10秒                         |
> | 右转 1.2 | 右转1.2秒                        |
> | 停       | 停止移动与转视角                 |
> | 重生     | 似了可以重生                     |
> | cmd quit | 真的要这么做吗TvT                |
> | 撤退！   | 【XDbot】好的！撤退！！！ (≧▽≦)/ |
>
> *上下调整视角没找到命令，所以实现不了*
> *如果是我忘记退了还能远端控制让我退出去uwu*
>
> #### 全局转拼音系统
>
> - 通过`@xd pinyin start/stop`控制开关
> - 通过空格分割，失败数量<成功数量，且第一/第二段长度<7 同时首字母为字母时，才触发拼音转文字
> 	- 示例：
> 
>
>| 输入例                          | 处理结果 | 预期结果                      |
> | ------------------------------- | -------- | ----------------------------- |
> | woooooo chao                    | 失败     | (第一段长度 ≥ 7) (×    √)     |
> | me too                          | 失败     | (第二段转文字失败) (√    ×)   |
> | dui me                          | 成功     | 对么 (√    √)                 |
> | !wo #neng zhuan wen zi ma       | 失败     | (前两段首字符非字母)          |
> | @ you yi shi mo fa @            | 成功     | 友谊是魔法 (×  √  √  √  √  ×) |
> | wo yao !!! zhuan 0v0 wen zi XD  | 成功     | 我要!!!转0v0文字XD (√√×√×√√×) |
> | biao dian.bu7ying xiang?fen ge! | 成功     | 标点.不7影响?分割!            |
> 
>*对于拼音之间无空格的，分离拼音暂不支持，由于要考虑的因素过于多，易误判，使用CPU消耗过大*
> 
>#### 查询服务器指令
> 
>按照模式或名称查询所有符合条件的，人数大于0的服务器当前人数。
> 
>- 指令所有部分中英文可以交叉使用；
> 
>- 返回多个服务器时，按人数降序排序；
> 
>- 查询名字时，可用空格分割名称匹配任意关键词，被匹配的关键词会高亮显示。
> 
>- 如果查询后只能查找到一个服务器且没有人，则忽略人数大于0条件，提示：
>   - 现在没有任何人！->  [服务器名称]
> 
>- 按官方要求，全局查询间隔不得低于15秒，若在15秒内则在缓存中查询
>   - `@xd 服务器 模式 (模糊模式)`
> 
>	- `@xd 服务器 名字 (模糊名称)`
> 
>- 示例：
> 	
>| 指令                        | 返回                                                         |
>| --------------------------- | ------------------------------------------------------------ |
> | `@xd 服务器 模式 铁对铁`    | 8人 -> [NSCN] 北极星CN官方原版铁对铁#1...等铁驭模式          |
> | `@xd server mode pvp`       | 8人 -> [NSCN] 北极星CN官方原版铁对铁#1...等铁驭模式          |
> | `@xd 服务器 名称 小图`      | 4人 -> [CN]坏逼们的服务器#`小图`铁对铁                       |
> | `@xd 服务器 名称 小图 nscn` | 8人 -> [`NSCN`] 北极星CN官方原版铁对铁#1<br />4人 -> [CN]坏逼们的服务器#`小图`铁对铁...等 |
> | `@xd server name 明日香`    | 16人 -> 仿生机器人会梦到电子`明日香`吗                       |
> 
> ​	更多示例：
>
> | 指令                       | 对应英文指令              |
>| -------------------------- | ------------------------- |
> | `@xd 服务器 模式 泰坦争斗` | `@xd server mode ttdm`    |
> | `@xd 服务器 模式 边境防御` | `@xd server mode fd`      |
> | `@xd 服务器 模式 困难`     | `@xd server mode fd_hard` |
> | `@xd 服务器 模式 消耗战`   | `@xd server mode aitdm`   |
> 
> ------
>
> ### 二、播报系统
>
> 通过读取游戏右下角RUI击杀信息，实现存储与个性化播报：
>
> 1. **连杀数量播报**
>     在连杀达到一定数量时进行播报，比如：
> 
>    - `xxx 达成了 10 连杀！无人可挡！`
>   - `xxx 达成了 15 连杀！诸天灭地！我们没救了！`
> 
> 2. **特殊连杀播报**
>     不同击杀方式有独特文案，例如：
> 
>    - `xxx 拳脚精通！使用「肘击」达成了 3 连杀！`
>   - `xxx 使用神器「A盾喷火」达成了 5 连杀！是火神！我们没救了！`
>    - `克莱博从入门到拳脚精通！xxx 放弃了克莱博，使用「肘击」达成了 3 连杀！`
>    - `xxx 使用神器「自瞄小手枪」连续锁了 3 个人！`
>    - `xxx 使用神器「炸弹无人机」连续炸死了 3 个人！并炸死了TA自己！`
>    - 以及更多……
> 
>    除了炸弹无人机连杀按6秒内不中断计算，其余均为似了清空连杀数。
>
> 3. **中断连杀播报**
>     达成 10 连杀后死亡也会有特殊播报：
> 
>    - `我们有救了！yyy 使用「Weapon」中断了 xxx 的 10 连杀！`
>   - `一刻也没有为 xxx 哀悼！xxx 使用「Weapon」中断了TA自己的 19 连杀！`
>    - `最终，没有人能中断 xxx 的 20 连杀`
> 
> 4. **踢出播报**
>
>    对于萌新/养老服调整播报门槛至 5 连杀
>
>    判断玩家被踢并提示：
>
>     - `大笨蛋 xxx 被踢出了游戏！`
>
>    被踢后再次加入未成功：
>
>    - ` 超级大笨蛋 xxx 在被踢后尝试再次加入，未果`
>
> 5. **整点报时**
>
>    在整点和半点时进行播报，并添加随机颜色颜表情`(=^･ω･^=)`
>
>    在凌晨0点后，颜表情将有99%概率替换成`(。-ω-)zzz`
>
>    - `现在是 北京时间 20:00:00 整！(｀・ω・´)`
>
> ------
>
> ## 额外的
>
> - 为了防止我不小心在小图挂机，我将实时自动切换到人多的队伍中，防止在人少的队伍中占位
>- 在长时间无人的情况下，我将自动退出游戏，在凌晨时，将改成发送关机提示并在一定时间后自动关机
> - 废除命令：
>   - `@xd oldPinyin (拼音) `—— 破损版/手搓转文字
> 
> ------
>
> ## 技术实现简述
>
> ### Squirrel & Python 
>
> #### Squirrel端
>
> - 用 `NSSaveJSONFile` 保存 json 到 save.json
>- 循环使用 `NSLoadJSONFile` 读取 load.json
> - 读取到后清空 load.json，查看 state.txt 状态
> - 状态为完毕则退出读取循环
> 
> #### Python端
>
> - 使用 `pywin32` 监控 save.json
>- 有变更后立刻读取，并将 state.txt 设为处理中
> - 多线程处理数据，完成后输出到 load.json
> - 若所有处理线程全部完毕，将 state.txt 置为完毕
> 
> #### 代码
>
> > squirrel 从零开始，一点点扒mod写法，所以存在以下要素：
>>
> > 依托代码、轻信AI、命名随意、重复造轮子、复用率奇低、随地大小注、难以维护，？？？
> >
> > 代码详见本仓库
> 
> 
>
> *将作为文档不断更新*



#### *change log:*

- 📅2025.7.14
  - 添加转拼音功能：
    - 添加例如 `@xd pinyin add chong ci 冲刺！冲刺！` 以添加拼音转义中文
    - 添加例如 `@xd pinyin del chong ci ` 以删除拼音转义
- 📅2025.7.11
  - 完全重构转拼音，基本消除bug且可以在任何阶段塞自定义词典，之后慢慢塞词语
  - AI的返回现在可以动态换行
- 📅2025.6.17
  - 👆 :(((( 这几周腱鞘炎在努力康复，规范了一下文档🥀🥀🥀
- 📅2025.5.23 周五
  - ✨为了增强时间观念，缩短时间流逝，添加了整点报时系统🕒！并奖励自己以最快速度飞回家度过周末🚲！
- 📅2025.5.22 周四
  - ✨摸一天鱼并更新了查询服务器指令。泰拉🌳，启动！